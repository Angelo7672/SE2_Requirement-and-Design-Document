\subsection{Overview}

%CLIENT-SERVER

CKB is thought form the ground basis as a client-server platform. In fact, Users access services through a Web App, which constitutes the only virtual device able to receive commands to interact 
with CKB.\\\\
The main logic is hosted in servers that manages all the functionalities of CKB, instead the client is only a graphic representation for the user.

The organization of Client-Server software is thought as remote representation because the fruition through Web App, as thin clients, witch role is just to expose to the User the Platform's 
services and their respective interfaces, deducting from the server exclusively the presentation of the App, meaning the GUI.

Client's communication is ideally handled by the Web Browser that hosts the Web App. Using HTTP and TCP protocols it has to provide a secure and effective communication with the Server. 
CKB User Interface code has to be written in order to be run on all kind of Browsers.\\\\
Servers, on the other hand, would be deputed to guard Users' data, after their kind and privileges, and Platform's model changed following given rules.

%MICROSERVICES
CKB, as thought, has at its core the possibility to manage and run multiple Battles, Tournaments and receive multiple inputs from different clients, after their type, all at the same time. 
Server has to handle multiple requests, realizing it thought concurrency.

An architectural approach that can be chosen is the Microservices one. 
With this choice, favored by the presence of multiple servers, each machine would host multiple components, properly replicated even in other machines, each one would elaborate specific inputs 
related to a precise topic or set of linked operations, that constitute a service.

The concept would include DBMS services, provided thought proper APIs, as long as communication ones and the dispatcher itself, that would account all requests form Users redirecting them to the 
right Microservice. This architecture guarantees concurrency, modularity, witch positively affects maintenance, and platform reactivity.

The approach empowers developers and authors to upgrade CKB with new functionalities without changing User's interface or all the way around, guaranteeing modularity and improvements.

All including appropriate duplication of each component to avoid failures and allowing the Platform to not lose data and determining resilience.\\\\

%LAYER
CKB is thought to be implemented as a 3 layer application:
\begin{enumerate}[label=$\bullet$]
    \item \textbf{Presentation Layer} the functionality of this layer is only to show to the user a graphic interface of the product functionalities of the application.
    \item \textbf{Application Layer} this layer is the core of the platform: it contains the whole logic of the application, it manages the functionalities of the application.
    \item \textbf{Data Layer} this layer contains all the data of the application.
\end{enumerate}
%TODO: immagine layer

%TIER
CKB, once realized, would be a 4 tier platform:
\begin{enumerate}[label=$\bullet$]
    \item \textbf{Client} Receives inputs form Users, displaying answers from the Server, allowing to navigate and interact with the Platform. As a thin Client is equipped just with 
    communication APIs with the Server, that sends what is needed to exhibit GUI, and components to build this latest one. User visualizing interface consists in the proper Student and Educator 
    variant, which differences are only at this architectural level irrelevant for the system's functioning.
    \item \textbf{Web Server} Web Server is the main door to access the Platform itself. It counts the module deputed to communicate with clients, the firewalls, the DMZ and the interfaces to 
    expose access to the system. Web Server is directly connected with the Application Server, and it is uncharged of sending back information to clients to update the GUI, reflecting 
    modifications on the Platform itself. This tier constitutes the bridge between Students and Educators and CKB.
    \item \textbf{Application Server} Application Server is the Platform itself with its core functionalities. It is built with a Microservice approach, that consists of single software modules 
    that manages a single "service", a group of operations related to a specific topic. The structure is preceded by a dispatcher module, that redirects clients' requests to proper service. 
    A suitable distribution of the application server in microservices will allow managing multiple Users' interactions at the same time.
    \item \textbf{DBMS Server} CKB stores even Users'information and both data to run the Platform, like tournament's and battle's data. DBMS tier is deputed to store, ensure and manage those data, 
    allowing access to Microservices that would require them, updating if needed according to proper rules. 
\end{enumerate}

%TODO: immagine tier


\subsection{Component View}
CKB's Application Layer is based on Microservices, that consitutes components in the system's architeture.
Which are:
\begin{enumerate}
    \item \textbf{SignInManager} It is the manager encharged of allow Users to sign in into the Platform or sign out, throught proper interface.
    \item \textbf{LogInManager} This module is the access door to CKB's Platform. It memorizes all Users which are currently interacting with the system. The component exposes a logIn Interface used by the User to log in and by other components to verify if a existing User is, in fact, logged in. Finally the interface allows to log out too.
    \item \textbf{RMPManager} The manager allows the Platform to perform pull requests from corresponding repos, acting as a Client in face of RMP. It is used by Evaluation Manager witch acceses pullRequests Interface.
    \item \textbf{NotificationManager} This component manages particular notifications to be sent to Users, comunicating with E-mail provider, which performs as a Server for this module. Requests are sent on other components' indications, which are expressed throught sendNotification Interface.
    \item \textbf{EvaluationManager} It is encharged of running test cases for every code file submitted by each Team. Basing on given parameters it would assign the corresponding Score.
    \item \textbf{BadgeManager} Allows Educators to create a Badge with corresponding parameters anche criterias. Moreover it assigns Badges to Students who can be awarded.
    \item \textbf{BattleManager} This component, verified the identity of the User which accesses it, is responsable for invitations of other Students and traking battle's points thought proper interface. Finally the component allows Students to join the Battle.
    \item \textbf{TournamentManager} It will be used by Educators to create a Tournament and to invite other Educators to join it, throught provided interface. Furthermore this component exposes Tournament's information and repo to clone, updates ranking and allows Teams to participate.
    \item \textbf{AccountManager} It is encharged of recruiting all information about a single Account, allowing the owner to delete or update the Account with new personal data.
    \item \textbf{SearchManager} It performs all searches of Users and Tournaments within the Platform. It organizes the data in a proper way from results got by DBMS and makes them availble via its interface.
\end{enumerate}
\subsection{Deployment View}
\subsection{Component Interfaces}
For each component here are explained functions, expressed in pseudo-code, associated with respective interfaces.
%DA VERIFICARE SE INSERIRE ANCHE I GETTER
\begin{enumerate}
    \item \textbf{SignInManager Interface} 
            \begin{enumerate}[label=$\bullet$]
                \item \textbf{Account Manager signIn(String name, String surname, String email, String password, String repo)} This method allows User to register to the Platform providing name, email, password and a repo that will receive system's pull requests thought proper component. The return is a Manager for that specific Account created.
                \item \textbf{Boolean signOut(String email)} To signOut from the Platform signOut method is invoked, with the email of the Account to delete as parameter. A Boolean value is responsable of informing of the outcome.
            \end{enumerate}
    \item \textbf{LogInManager Interface}
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{Bool logIn(String email, String password)} The method is used to let the manager know when a User, registered or not, asks to enter CKB. The result of the invocation is a Boolean value to acknowledge client of the success or insuccess of the operation, which depends on parameters' correctness or on Account existence.
            \item \textbf{Bool logOut(String email)} In order to log out form the system is needed as input the email of the User to discard from Users that are currently interacting with the Platform. A Boolean value comunicate the outcome.
            \item \textbf{Bool isLogged(String email)} Throught this method, providing the an email, the invocator is able to know is the User who asks for the operation is actually logged in.
        \end{enumerate}
    \item \textbf{RMPManager Interface}
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{String pullRequest(String repo)} In order to perform a Pull request to the right RMP by RMPManager, the component thought the here descripted method, asks for the repo as a parameter. The return value is the code pulled from the repo itself.
        \end{enumerate} 
    \item \textbf{NotificationManager Interface}
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{Bool sendNotification(String email, String description)} The only parameters required are the recipient email address and its content. The method reports a Boolean value to report the status of the operation.
        \end{enumerate}
    \item \textbf{BattleManager Interface}
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{Bool joinBattle(String email, String team)} Providing the email of the Student and the eventually the name the Team he/she would like to join, the Manager performs the information, returning thought a Boolean value the outcome of the invocation.
            \item \textbf{void updateBattleScore(String team, int score)} The score of a Team is updated, via this method's invocation, providing the name of the Team and the actual Score, witch is an integer value.
        \end{enumerate}
    \item \textbf{TournamentManager Interface}
        \begin{enumerate}[label=$\bullet$]
        \item \textbf{void inviteEducator(String myemail, String emailToInvite)} To invite other Educators are needed the email of the Educator who invites and the one of the Educator to invite.
        \item \textbf{Bool createTeam(String myEmail, Array<String> emails, String team)} The creation of the Team is deputed to this method. As input parameters are necessary the email of the User who invites others, list of emails of other Students to invite, and the name of the team. The result is provided via Boolean value. 
        \item \textbf{Bool joinStudentTournament(String email, String team)} An invited Student's acceptance results in this method invocation, which is responsable of the creation of the team. In fact, it is provided its name and the email of the Student that wants to join the Tournament with its colleague.
        \item \textbf{Bool joinEducatorTournament(String email)} When an Educator receives an invitation of collaboration to a Tournament, the method invoked internally to actually join it is joinTournament, that responds with the Boolean of result of the execution and asks for the email of the Educator.
        \item \textbf{void updateTournamentScore(String team, int score)} The Score of the Tournament has to be updated via this function, that requires the name of the team and the integer value of the score.
        \end{enumerate}
    \item \textbf{AccountManage Interface} 
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{Bool deleteAccount()} The method performs the deletion of the AccountManager associated to the specific User. A true/false response describes the result.
            \item \textbf{void updateAccount(String name, String surname, email, repo)} UpdateAccount is the function used by the User to update its personal information, providing new name, surname, email or repo thought which he/she would be identified in the system.
        \end{enumerate}
    \item \textbf{SearchManager Interface} 
        \begin{enumerate}[label=$\bullet$]
            \item \textbf{Array<AccountManager> searchUser(String email, String name, String surname)} To search one or more Users SearchManager, thought the here presented method requires the email or name or surname of the User to search and returns the list of the Students'/Educators' AccountManagers of the ones who matched the criterias.
            \item \textbf{Array<TournamentManager> searchTournament(String tournamentName)} The name of the Tournament to search is required and as result the Array of TournamentManagers, which data matched the parameters, is provided.
        \end{enumerate}
\end{enumerate}
\subsection{Runtime View}
\subsection{Noteworthy Architectural Patterns}
\subsection{Other design Decisions}