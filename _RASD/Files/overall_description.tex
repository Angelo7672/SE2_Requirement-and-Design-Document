This section describes the perspective, functionalities, characteristics, and domain assumptions of CKB platform, which is a complete system.\\
The rigorous description of the RMP is out of the scope of the document. Of the RMP will be only described critical parts needed for the correct functioning of the platform, allowing to choose those ones that satisfy them in a later stage.
\\
\subsection{Product Perspective}
\subsubsection{Scenarios}
\begin{enumerate}[label= \textbf{SC\arabic*}]
    \item \textbf{Student signs in to the platform to participate to tournaments}
    \label{sc:sc1}\\ Alice is studying programming all by herself and wants to evaluate her work. She accesses the Platform website and is intrigued to try it out. 
    Alice signs in as a student giving her details like name, surname, e-mail,  year of birth and RMP handle. Once done that she will receive updates on new open tournaments. Moreover, she can log in and be presented with a list 
    of tournaments to which she can subscribe.
    \item \textbf{Student wants to participate in a tournament} \label{sc:sc2}\\ Dan, after studying a bit of Javascript wants to apply its studies in a project. In order to do so he wants to participate in a tournament. He is already subscribed 
    to the platform, so he can just log in to it and search a suitable tournament. After being presented of some valid choices, he clicks on one of them to see more details like description, educators, subscription deadline and 
    available badges. If he likes it, he clicks a "Subscribe" button, otherwise goes back and continues to search.
    \item \textbf{Student wants to participate to tournament with friends} \label{sc:sc3}\\ Bob, a user of the platform, got notified of the creation of an interesting tournament in which he wants to participate with his friend Carlo. Bob logs in 
    to the website and subscribes to the tournament sending an invitation to Carlo, who gets notified of the invitation and, once logged in to the platform, can choose to accept or to deny it; if he accepts Bob and Carlo result 
    subscribed to the tournament as a team.
    \item \textbf{Educator signs in to the platform to create tournaments} \label{sc:sc4}\\ Eve is a teacher that, in order to widen her didactic offer, wants to create some tournaments for her students. She accesses the Platform website and is 
    intrigued to use it. Eve signs in as an educator giving her details like name, surname, e-mail, year of birth, institution and RMP handle. Then she logs in and is presented with a list of managed tournaments, empty for her, 
    and the possibility to create new ones.
    \item \textbf{Educator wants to create a tournament} \label{sc:sc5}\\ Faith is a user of the platform signed in as an Educator and wants to create a tournament. She logs in to the website and is presented with the homepage, in which she can 
    start to create the tournament by clicking a specific button. After clicking it she can enter details like tournament name, details (as overview, programming language/s and maximum and minimum number of students for a team),
    subscription deadline and duration, then click a "Create tournament" button that will create the tournament and bring her to the manager tournament page. 
    \item \textbf{Educator wants to manage a tournament with a colleague} \label{sc:sc6}\\ Grace is an educator who is managing a tournament, she finds that the work behind creating all battles of the tournament is a bit too daunting, so she wants 
    help. To do so she goes to the tournament management page and by clicking the "add Educator" button she can send an invitation to manage the tournament to her friend Heidi, another educator registered to the platform. Heidi 
    can accept the invite and create new battles and badges for the tournament and if it is required, also manual evaluate the students' code.
    \item \textbf{Team wants to work on a battle} \label{sc:sc7} \\ After receiving notification of the tournament's start, a team that has subscribed to the competition wishes to focus on a battle. After arriving at the tournament page, to Isaac, 
    a member of the team, is shown a list of the battles that are available. He selects one and is taken to a new page that includes his name, details, the team scoreboard, and a link to the repository within the RMP. Since Isaac 
    has already registered with the RMP, he is able to fork the repository and make an actual copy that is stored in its profile. He now needs to check each team member's RMP handle in their profile and invite them all to join the 
    battle. All team members have to accept the invitation, and after then they can start to work on the battle. The owner of the forked repository has to put its link in the battle details to signal the platform of its existence and in
    other he has to set an automated workflow that informs the CBK platform (through proper API calls) as soon as someone of the team make a modification of the code in the repository.
    \item \textbf{Team wants to have work evaluated} \label{sc:sc8} \\ A team has worked on the battle and wants to check how is the quality of his work. In order to do so they only need to commit their changes and push their work to the RMP, 
    this will be able to alert the platform of the new changes and will set off a pull of the files to be evaluated. After running all tests, these will generate points that will be combined to form a score. This score will be 
    published near the name of the team in the leaderboard of the battle, and will update also the main tournament score of that team. Possible checks for badge assignment can be also done, and if satisfied, badges can be granted at 
    the end of the tournament.
    \item \textbf{Team wants to see how it is placed in the tournament} \label{sc:sc9} \\ Angelo, a student participating in a tournament in a team, wants to know how well they are doing. To do so he can log in to the platform and go to the page 
    of the tournament, on which he can see the leaderboard where he can find the overall tournament score of the team. Angelo can also check specific battles visiting their specific page where the related battle leaderboard is shown.
    \item \textbf{User wants to check out other user's profile} \label{sc:sc10} \\ Michael, a user of the platform, wants to find the profile of his friend Nick to check out on him. He logs in to the website in which he can search for other users 
    via a specific bar, there searches for Nick, and clicking on his name goes to the profile page. Here he can see his details like: user type, name, surname, RMP handle and badges.
    \item \textbf{Educator wants to create a Battle} \label{sc:sc11} \\Jude oversees a tournament as an educator. She now wants to put her students to the test by suggesting a battle. When she opened the CKB Web App, she was taken to the page where she 
    oversees the tournaments she manages. Jude then chooses the one where he wants to start a battle and clicks the "Create Battle" button. This opens a form for her to fill out with the battle's name and an overview of the battle. 
    After supplying these details, she needs to include the battle's RMP repository link and specify the battle's evaluation modality. After filling out the form, she presses the "Submit" button. Now that the system has confirmed all 
    the data, a new battle has been created.
    \item \textbf{Educator wants to create a Badge} \label{sc:sc12} \\Beniamino is an educator, and he wants to design a badge for a tournament he oversees. He open the CKB Web App on his home page and go to the page with the managed tournaments list.
    He clicks the "Add Badge" button after choosing the one for which he wanted to make the badge. Beniamino receives a form to complete, which he provides by adding an image, a description, and the requirements that must be met in order 
    to obtain this new badge. Once the form is submitted, the badge is created and made achievable during the tournament.
    \item \textbf{Student gets awarded with badge} \label{sc:sc13} \\
    Rupert, a student of the platform, has participated to a tournament, writing code for the battles. His code got evaluated and is in the scoreboard of the platform. The tournament has ended, so he can no more change his code. 
    While checking his e-mails, he finds one email, sent from the platform, that notifies him that he got awarded with a new badge.
    Then curious, he goes to his profile page to see the badge, where he finds it with a foto and a short description.
    After some time, Olivia, a user of the platform wanting to find a student to invite to a team, for curiosity checks Rupert's profile page, seeing that he gained a lot of badges during his time on the platform, decides to try inviting him.
\end{enumerate}

\newpage

\subsubsection{Domain Model}

\paragraph{Class diagram}
This is an illustration of a high-level UML. The primary classes are described, along with the relationships that exist between them.
\useSvgWithCaption{./Images/UML/classDiagram/entityClassDiagram.svg}{1.0}{1.0}{High-level UML diagram with main classes}
\\For compassion for the reader, this class diagram has been divided in three parts to facilitate fruition:
\newpage
\subparagraph{Platform Class Diagram}
Describes the core functionality of the Platform without caring about RMP and Badges.\\
\useSvgWithCaption{./Images/UML/classDiagram/entityClassDiagramPlatform.svg}{0.65}{0.65}{Platform Class Diagram}
\newpage
\subparagraph{Platform relationship with RMP Class Diagram}
Describes which elements of the platform have relations with RMP.\\
\useSvgWithCaption{./Images/UML/classDiagram/entityClassDiagramRMP.svg}{0.35}{0.35}{Platform relationship with RMP Class Diagram}
\subparagraph{Platform Gamification Class Diagram}
Describes how Badges work inside the platform.\\
\useSvgWithCaption{./Images/UML/classDiagram/entityClassDiagramGamification.svg}{0.35}{0.35}{Platform Gamification Class Diagram}
\newpage 

\paragraph{State diagram}
The different stages of the tournament and the battle are depicted in the state diagram in the figure.
\useSvgWithCaption{./Images/UML/stateDiagram/stateDiagram.svg}{1.0}{1.0}{State Diagram of the tournament and the battle}
In the CREATED state it is possible to add educators, battles and badges to the tournament.
Adding a battle consists in provide a description for it, make the code and the test available and in defining the modality of evaluation between the automatic modality and the optional manual modality.
Adding a badge consists in giving a name for it and defining its requirements.
\newpage

\subsection{Product Functions}
From the previous scenarios and the introduction above follow these Product Functions.

\subsubsection{User Functions}

\paragraph{Sign in}
Every person that wishes to sign in to the platform can sign in via a specific form which allows to become an user of it.
In the platform the form requests: name, surname, e-mail address, RMP handle, user type and password; after clicking on confirmation button, the platform sends a confirmation e-mail to the e-mail address given in the form with a button to finalize the subscription to the platform. Sign in is finalized once the button is clicked.
\paragraph{Log in}
Every user needs to log in to the platform to perform any activity in it. Log in is done via a form which has to be filled with e-mail address and password, if the pair corresponds to a user, the user will be logged in to the platform as of his role (student or educator).
\paragraph{Search for other user}
Every user subscribed to the platform, can search other users by name, email or RMP handle in the search bar. If the user searched is a student, on his profile page are shown also the badge achieved.

\subsubsection{Educator Functions}

\paragraph{Create a Tournament}
The page where the tournament creation is displayed is accessed by clicking a specific button on the homepage.\\
There, educators can enter the tournament's name, description, programming language/s, minimum and maximum number of students per team, subscription deadline, and duration.\\ 
After the educator clicks the "Create tournament" button, students are notified that a new tournament is available.
When the deadline subscription is reached, the tournament begin.
\useSvgWithCaption{./Images/BPMN/createTournament.svg}{1.0}{1.0}{BPMN diagram of the creation of a tournament}

\paragraph{Create a Battle}
In the dedicated manage page that is provided to the educators involved in a specific tournament, there is a "Create battle" button that an educator can use to create battles.\\
After that the educator click on that button, he inserts in the battle creation page the name, a description, the link to the RMP directory (the RMP directory contains all the test cases of the battle
and in some case also some programming code already available) and set how the battle will be evaluated, defining how many points of the total 100 will go to the functional tests, to timeliness, to 
the quality level of the sources, and optionally he could designate some points also to the manual evaluation.\\
In any case the sum of the points that a team could achieve from all this parameter must be 100.
\useSvgWithCaption{./Images/BPMN/createBattle.svg}{1.0}{1.0}{BPMN diagram of the creation of a battle}

\paragraph{Add an educator to a tournament}
An educator can add another educator to a tournament once he is on the appropriate management tournament page. The educator's addition will support the manual assessment of the students' code.
\useSvgWithCaption{./Images/BPMN/addEducator.svg}{1.0}{1.0}{BPMN diagram of the addition of a new educator to the tournament}

\paragraph{Create a badge}
The tournament management page allows an educator to make a badge. To accomplish this, he must click the "Create a badge" button. This will open a creation form, which the educator must fill out with the name of the badge and the rule 
or rules that the students must follow in order to receive the badge.
\useSvgWithCaption{./Images/BPMN/createBadge.svg}{1.0}{1.0}{BPMN diagram of the creation of a badge}

\subsubsection{Student Functions}

\paragraph{Search and subscribe to a tournament}
A student can search for tournaments on the platform from his homepage. He can view the most recent tournaments added or search for them by name or properties.\\
He can subscribe to a tournament after selecting one, and each tournament has a minimum and maximum number of students signed up for each team. While it is occasionally possible to compete alone, one of CKB's goals is to teach 
students how to write code in a team. As a result, students will most likely join a team when they subscribe to the tournament, and it's possible that he will invite some of his friends to join a team that he will name during the 
subscription process.

\paragraph{Accept an invitation from another student}
A student can join to a tournament by an invitation of another student and compete together in a team.

\paragraph{Complete a battle}
A student can carry out battles by clicking on the button of a particular battle from the tournament page once he has subscribed to it. Once the RMP directory has been configured with the fork and workflow action, he can write code 
locally to pass the test cases that are included in the battle repository. The platform will automatically evaluate the functional test, the timeliness and quality of the sources, and it will update the battle score, that the student 
can view from the battle page, each time he pushes code into the repository. Optionally, an educator might evaluate the written code as well.

\subsection{User Characteristics}

\subsubsection{User}
A user is a normal person who intend to subscribe to CKB. It is able to access to the platform by web app from any type of device with an internet connection.

Every user subscribed to the platform is able to search for other users using the search bar.

\subsubsection{Educator}
An educator is a user whose job it is to provide students with rewards and practice materials for software development.

He designs coding battles and software development tournaments that simulate actual IT case problems for students. In addition, he evaluates their work optionally and creates a special badge for students who successfully complete 
specific tasks.

\subsubsection{Student}
A subscriber to CKB who wants to hone his skills in one or more programming languages or who wants to practice developing software in a team is identified as a student.

He can use the homepage to browse tournaments and subscribe to them, but he may also want to use the search bar to look up tournaments by name or just look them up by programming language. He has the option to invite other students
to join him in a team that he will name in the subscription, or he can accept invitations to participate in tournaments.

His team will be ranked in the tournament according to the total battle score they earn during the coding battle phase of the tournament.

\subsection{RMP Functions}
The Repository Manager Platform is a platform that allows to store code in a smart way
RMP is third party system that is responsible for storing all Team code related to all battles of all tournaments, the code will be kept only for test purposes and discarded shortly after score assignment. 
To be useful to the platform the RMP needs to have some necessary functionalities like:
\begin{enumerate}
    \item RMP users can search for other RMP users by handle or e-mail
    \item RMP users can collaborate on shared repositories
    \item RMP allows running actions and these can work with KCB platform's API, technically needed to signal the platform of new pushes on the repository.
\end{enumerate}


\subsection{Assumptions, Dependencies and Constraints}

\subsubsection{Assumptions}
\begin{enumerate}[label=$\bullet$ \textbf{D\arabic*:}]
    \item User has provided valid credentials - RMP handle, e-mail, name and surname
    \item User is registered to the RMP platform
    \item User has a functioning device capable of internet connection
    \item User has a functioning internet connection
    \item User can locally work on project files
    \item User use platform ethically
    \item Educators correctly set the repository for each battle
    \item Educators create tournaments adequate for the platform
    \item Educators allow Students to fork battle repository
    \item Teams fork repository once for battle
    \item Teams work on their forked repositories
    \item Students don't allow students out of their team access to modify code in their repository
    \item Students allow tournament educators access to their team repository
    \item Teams declare coherent links to their battle repositories
    \item RMP is able to notify the platform once every push
    \item RMP is able to reliably store battle source code
    \item RMP API is accessible to third party applications
    \item RMP bases itself on version control system
\end{enumerate}

\subsubsection{Dependencies}
\paragraph{Repository Manager Platform}
The Repository Manager Platform is a platform that allows to store code in a smart way using a VCS.
RMP is assumed to be a third party system that is responsible for storing all team code related to all battles of all tournaments, the code will be mainly kept on the RMP and the CKB platform will take it only for test purposes and discard it shortly after score assignment. 
To be useful to the CKB platform the RMP needs to have some necessary characteristics that have been listed as domain assoumptions.
An example of compatible RMP is GitHub.

\subsubsection{Constraints}
\paragraph{Security Constraints}
Given her nature, this platform is more vulnerable to security attacks than other ones. For this reason, especially in battle code evaluation, the platform needs to implement state of the art security policies in order to protect user data and safety.
\paragraph{Privacy Polices}
Personal user data and storic user data shall be stored and used only for legitimate use internal to the platform. Public to the platform user data has to be accessible only via the platform. Finally, none of the user data has to be used for commercial purposes, and its use has to be done in compliance with, to the user, local privacy policies. 
\paragraph{Platform Limitations}
User is required to use internet connection to access the platform, download code repository and upload code for evaluation. Out of these actions, Users can work on battles locally without the need of internet connections, if not specifically stated otherwise in the battle description.\\
Battle computational size and complexity has to be sized in order to be feasible to be coded and executed locally by students.\\
Platform does not allow for live code editing and execution, for this reason users have to be able to edit and run code locally.
